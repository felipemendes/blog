{"componentChunkName":"component---src-templates-blog-post-js","path":"/lazy-var/","result":{"data":{"site":{"siteMetadata":{"title":"Felipe Mendes"}},"markdownRemark":{"id":"40bfd97f-614c-5cf6-85fc-580b5017c9f8","excerpt":"Em desenvolvimento mobile o poder de computação é muito limitado comparado à outras plataformas. Por esse motivo uma boa prática é criar objetos complexos…","html":"<p>Em desenvolvimento mobile o poder de computação é muito limitado comparado à outras plataformas. Por esse motivo uma boa prática é criar objetos complexos somente quando precisamos deles.</p>\n<p>Swift tem um mecanismo embutido na linguagem que permite o cálculo <a href=\"https://en.wikipedia.org/wiki/Just-in-time_compilation\">just-in-time</a> para tarefas mais complexas chamado de <code class=\"language-text\">lazy var</code>. Esse tipo de declaração permite que a propriedade seja executada somente quando for solicitada pela primeira vez. Se nunca for solicitada, a propriedade nunca é executada.</p>\n<p>No exemplo abaixo foram criadas quatro variáveis, duas com o indicador <code class=\"language-text\">lazy</code> e duas sem. Um <code class=\"language-text\">breakpoint</code> foi habilitado no início da função <code class=\"language-text\">viewDidLoad</code>. Quando o <code class=\"language-text\">breakpoint</code> é acionado <strong>somente as propriedades sem o indicador <code class=\"language-text\">lazy</code> são criadas</strong>. Como podemos confirmar no <code class=\"language-text\">lldb</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e0e35b7ddf36e0874bd2fddb41b86a45/6bff2/var-criada.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABOUlEQVQoz5WSy07DMBBF8/8fxh4EG2iJ1DRpnrUdv5+XSZEQC1rakY7G8cJ2ztzK+gTHDeZhAht6qGGGXiTsapBjxFallLupREiAS1BnBc4EorGA94RDCQGPVtXxiKAN1oljmRZM8xnKGqSSEHMkwg0ibDDQTl6wUaN6erfgkmPsZrTdiLo54rSMYHr9HyNxZB12wx67fo8Db1BNyiNnYBglhkXApwL6RCQTMf8i/bFHJCKXb7Z1JR15yuRwtRBSkj5/h6lylYrRhKUyCMHD0WHKOWhyqJSmC6jTkLhyMFrTnoIm3ymlq1R9O6H+rFEfGrTUT8+vYG0HRwdF+seNcOmBLqVBUJRuxmZdBQ5Ng/FjD/Hyhtz2FJnH4/ITG0neuBAwjCGKFYXMljvCvJUjPZvz7eWeHmEoz1/QsAyYLZQtYAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Var criada\"\n        title=\"Var criada\"\n        src=\"/static/e0e35b7ddf36e0874bd2fddb41b86a45/f058b/var-criada.png\"\n        srcset=\"/static/e0e35b7ddf36e0874bd2fddb41b86a45/c26ae/var-criada.png 158w,\n/static/e0e35b7ddf36e0874bd2fddb41b86a45/6bdcf/var-criada.png 315w,\n/static/e0e35b7ddf36e0874bd2fddb41b86a45/f058b/var-criada.png 630w,\n/static/e0e35b7ddf36e0874bd2fddb41b86a45/40601/var-criada.png 945w,\n/static/e0e35b7ddf36e0874bd2fddb41b86a45/6bff2/var-criada.png 957w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Ao avançar a execução do código, as propriedades do tipo <code class=\"language-text\">lazy</code> somente são criadas em tempo de execução.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2aa3bcffeb7a6a9cda776362a536d8b3/b97f6/lazy-var-criada-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABOUlEQVQoz52SC07DMBBEc/+rcQaKgDZNceskjuO/89iUFhUJEGWl0Vq2NJ6dncbHQhgcqlP0h47poLAngzOOmhLLstyFZkwFhNTqiaEfSM5BCCwxUGPkoxb+Wk07ZKpP2KMQ6hEt8CF/0tyt8GEjCmslaM+kLSel8avKf1bTGU8umX3X0x5PePEtrx/k/CPiZy+45HkzHYdhz3FWNGpyBPFK9xbVj4yzE0vLN6gXlBviwhwd3diyH3Yoe6AxU8D5KFMXsqgLspAY1juxYA7iZ8S4SBAbnMDL/SITrKjnfrMwOTb7reLx8YmnzYbt65Z216JPWmIzEV0gxUSUJESZYkW6iVJdcSG+ojFm5OX5GaUUkzHMsz1bUF+21F2HSLxvKdZaiYpm7TnnL4/LL9FZ66o65yTKMy4U3gH+8w6hQtEq6AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lazy var criada 1\"\n        title=\"Lazy var criada 1\"\n        src=\"/static/2aa3bcffeb7a6a9cda776362a536d8b3/f058b/lazy-var-criada-1.png\"\n        srcset=\"/static/2aa3bcffeb7a6a9cda776362a536d8b3/c26ae/lazy-var-criada-1.png 158w,\n/static/2aa3bcffeb7a6a9cda776362a536d8b3/6bdcf/lazy-var-criada-1.png 315w,\n/static/2aa3bcffeb7a6a9cda776362a536d8b3/f058b/lazy-var-criada-1.png 630w,\n/static/2aa3bcffeb7a6a9cda776362a536d8b3/40601/lazy-var-criada-1.png 945w,\n/static/2aa3bcffeb7a6a9cda776362a536d8b3/b97f6/lazy-var-criada-1.png 958w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d58dc4eecedf224b34824d098f4d6ce4/6bff2/lazy-var-criada-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQklEQVQoz5WSiU7DMAyG8/6vxjPA1lFGm+VujjZp+uNuZUxioM3Sp0SO7fhiQxgRtYfoT9C8h+cCQTpEF1FzxrIsT8FcrsA0w6sBRmvkEIAxYZlG1GnCRRY8KuzTFtSU4U8ORlko7ZDGcjV4OsOXV3KuM5KMcIpK5xIxhjXSltkDbMHWOxO+nHWcD+ilQZ4v5c31b+otN91YY7KW+maCw0cv0PAOnVGwKdzgN350JvorMlg08h17cUBrjmDSONiB+jYFBHJ03p4xTkNaA0N34VYbDU06OxiyjVfCSEHdCcJy6CDBulZg99ag2e1xbI/ouh5ak1MakfOMUmZMpaLQCuUp01luarwzZWs0mv2OesjhnMVAZxr8NpT7suB7CL9fWPABSikE2r/19/nQotKkK2W4/LM2q0y0p5kyL6UgE4n2+QsgWgy/8KkdSAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lazy var criada 2\"\n        title=\"Lazy var criada 2\"\n        src=\"/static/d58dc4eecedf224b34824d098f4d6ce4/f058b/lazy-var-criada-2.png\"\n        srcset=\"/static/d58dc4eecedf224b34824d098f4d6ce4/c26ae/lazy-var-criada-2.png 158w,\n/static/d58dc4eecedf224b34824d098f4d6ce4/6bdcf/lazy-var-criada-2.png 315w,\n/static/d58dc4eecedf224b34824d098f4d6ce4/f058b/lazy-var-criada-2.png 630w,\n/static/d58dc4eecedf224b34824d098f4d6ce4/40601/lazy-var-criada-2.png 945w,\n/static/d58dc4eecedf224b34824d098f4d6ce4/6bff2/lazy-var-criada-2.png 957w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Esta prática tem diversas utilidades e é muito comum em <strong>propriedades computadas</strong>. No exemplo abaixo, a propriedade <code class=\"language-text\">lazy var fullName</code> somente será criada na memória quando invocada. E como não foi chamada no teste não houve desperdício de memória, mesmo o objeto sendo instanciado.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c64ea79e042071517434602aabbf3066/b97f6/lazy-var-nao-invocada.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.0379746835443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA4klEQVQoz62Q25LCIBBE+f/vXN0kGpdwm+HaC4mJiVrli1PVNRQwh24EKcI0TVirNJXyUTlnhBBeJILy+P05YxxHZGtQPC/gefA9vFUDOudeJDIn/PU3dF0HO1zgtUVeSA/AHbI+tAcS0aYZmGJEMhFeGVCNzlKDnIVxBGau3SGnvHP9AHrvN9AKF1a7OmTh2CNU+LOTnbnDfvuvoe8PLrXWENerxnBTGKTBqBw4FlAo4HDse3F915LH+XSCMWZzKKWEiCkd4qQaL9U4c3+n+1mLvNxPiDVZU1uL9eBbEvhy/QMbZ8Q5WBmEJwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lazy var não invocada\"\n        title=\"Lazy var não invocada\"\n        src=\"/static/c64ea79e042071517434602aabbf3066/f058b/lazy-var-nao-invocada.png\"\n        srcset=\"/static/c64ea79e042071517434602aabbf3066/c26ae/lazy-var-nao-invocada.png 158w,\n/static/c64ea79e042071517434602aabbf3066/6bdcf/lazy-var-nao-invocada.png 315w,\n/static/c64ea79e042071517434602aabbf3066/f058b/lazy-var-nao-invocada.png 630w,\n/static/c64ea79e042071517434602aabbf3066/40601/lazy-var-nao-invocada.png 945w,\n/static/c64ea79e042071517434602aabbf3066/b97f6/lazy-var-nao-invocada.png 958w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"Lazy Var","date":"27 fevereiro, 2019","description":""}},"previous":{"fields":{"slug":"/struct-vs-class/"},"frontmatter":{"title":"Struct vs Class"}},"next":{"fields":{"slug":"/gerenciamento-de-memoria/"},"frontmatter":{"title":"Gerenciamento de Memória"}}},"pageContext":{"id":"40bfd97f-614c-5cf6-85fc-580b5017c9f8","previousPostId":"e996788a-b35e-5c44-9904-e515901c7b2f","nextPostId":"e4ea9fc9-813e-5457-92d3-4f9c98333320"}},"staticQueryHashes":["1344965497","2841359383"]}